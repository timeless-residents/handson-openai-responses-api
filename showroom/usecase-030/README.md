# ユースケース 030: カスタマーサポートチャットボット

このユースケースでは、OpenAI Responses APIを使用して、リアルタイムで顧客の問い合わせに応答するカスタマーサポートチャットボットを実装します。

## 概要

カスタマーサポートチャットボットは、オンラインショップの顧客が商品情報、注文状況、返品ポリシーなどの情報を取得するための効率的な方法を提供します。このサンプルでは、Responses APIと関数呼び出し（function calling）機能を使用して、ユーザーの質問に応じて適切なデータを取得し、自然な言葉で応答するボットを構築します。

このサンプルでは、以下の機能を紹介しています：

- カスタマーサポート向けのAIアシスタントの構築方法
- 関数呼び出しを使った外部データ（商品情報、注文状況など）の取得と活用
- 会話の文脈を維持しながらの継続的な対話の実現
- コンソールベースとWebベースの両方のインターフェース実装

## 実装されている機能

1. **商品情報照会**: 特定の商品IDを指定して詳細情報を取得、または検索キーワードで商品を検索
2. **注文状況確認**: 注文IDを指定して配送状況などの情報を取得
3. **FAQ検索**: よくある質問とその回答を提供
4. **ポリシー情報**: 配送、返品、保証、プライバシーなどの会社ポリシーの説明
5. **会話の文脈維持**: 連続した対話でも文脈を理解して応答
6. **テキスト/Webの両インターフェース**: コマンドラインとブラウザの両方で利用可能

## 実行方法

1. プロジェクトのルートディレクトリにある`.env`ファイルにOpenAI APIキーを設定します：

```
OPENAI_API_KEY=your_api_key_here
```

2. 必要なパッケージをインストールします：

```bash
pip install -r requirements.txt
```

3. スクリプトを実行します：

```bash
python main.py
```

4. インターフェースを選択します：
   - コンソールインターフェース（テキストベース）
   - Webインターフェース（ブラウザベース - http://localhost:5000 にアクセス）

## 活用例

以下のような質問で機能をテストできます：

- **商品情報**: 「コーヒーメーカーについて教えてください」「TS-100の仕様を教えてください」
- **注文状況**: 「注文番号ORD-12345の配送状況を教えてください」
- **返品ポリシー**: 「返品のルールについて教えてください」「保証期間はどのくらいですか」
- **一般的な質問**: 「支払い方法は何がありますか」「配送にはどれくらいかかりますか」

## 技術的な詳細

このサンプルでは、以下のOpenAI Responses API機能を活用しています：

1. **Function Calling**: AIが適切なタイミングで外部関数を呼び出して情報を取得
2. **前回のレスポンスID**: 会話の継続性を維持するために前回のレスポンスIDを活用
3. **インストラクション設定**: ボットの役割と応答スタイルを定義するシステムプロンプト

## カスタマイズとビジネス応用

このサンプルは以下のようにカスタマイズして実際のビジネスに応用できます：

- **データソースの変更**: 模擬データの代わりに実際のデータベースに接続
- **追加機能の実装**: 商品推薦、在庫確認、会員登録、購入手続きなどの機能を追加
- **UI改善**: より使いやすいチャットインターフェースを実装
- **多言語対応**: 複数言語でのサポートを追加
- **分析機能**: 顧客の質問傾向や満足度を分析する機能を追加

## 制限事項と考慮点

- **API使用量**: 頻繁な利用や長いチャットセッションはAPIコストが増加する可能性があります
- **APIキーのセキュリティ**: 実運用では適切なAPIキー管理が必要です
- **モデルの制限**: モデルが持つ知識の範囲や精度には限界があります
- **個人情報の取り扱い**: 顧客の個人情報を扱う場合は、適切なプライバシー保護対策が必要です

## 追加リソース

- [OpenAI Function Calling Documentation](https://platform.openai.com/docs/guides/function-calling)
- [Responses API Reference](https://platform.openai.com/docs/api-reference/responses)
- [Flask Documentation](https://flask.palletsprojects.com/)
- [Pydantic Documentation](https://docs.pydantic.dev/)