# ユースケース 040: 市民向け行政サービス案内

このユースケースでは、OpenAI Responses APIを活用して、市民が行政サービスに関する情報を簡単に検索・取得できるチャットボットを実装します。

## 概要

市民向け行政サービス案内チャットボットは、住民が各種行政手続き、公共サービス、イベント情報などについて質問できる対話型インターフェースを提供します。このサンプルでは、Responses APIとツール機能を使用して、ユーザーからの問い合わせに応じて適切な情報を提供し、必要な手続きを案内します。

このサンプルでは、以下の機能を紹介しています：

- 行政サービス案内のためのAIアシスタントの構築方法
- 関数呼び出しを使った各種行政情報（手続き、施設情報、イベントなど）の取得と活用
- 会話の文脈を維持しながらの継続的な対話の実現
- コンソールベースとWebベースの両方のインターフェース実装

## 実装されている機能

1. **手続き情報照会**: 各種証明書発行、住民登録、税金関連など行政手続きの案内
2. **施設情報検索**: 市役所、図書館、公民館などの公共施設の情報提供
3. **イベント情報**: 地域イベント、講座、相談会などの情報提供
4. **よくある質問**: 一般的な行政サービスに関するFAQの回答提供
5. **会話の文脈維持**: 連続した対話でも文脈を理解して適切に応答
6. **テキスト/Webの両インターフェース**: コマンドラインとブラウザの両方で利用可能

## 実行方法

1. プロジェクトのルートディレクトリにある`.env`ファイルにOpenAI APIキーを設定します：

```
OPENAI_API_KEY=your_api_key_here
```

2. 必要なパッケージをインストールします：

```bash
pip install -r requirements.txt
```

3. スクリプトを実行します：

```bash
python main.py
```

4. インターフェースを選択します：
   - コンソールインターフェース（テキストベース）
   - Webインターフェース（ブラウザベース - http://localhost:5000 にアクセス）

## 活用例

以下のような質問で機能をテストできます：

- **手続き情報**: 「住民票の取得方法を教えてください」「確定申告の期限はいつですか」
- **施設情報**: 「図書館の開館時間を教えてください」「子育て支援センターはどこにありますか」
- **イベント情報**: 「今週末の市民イベントはありますか」「無料の健康相談はいつ開催されますか」
- **一般的な質問**: 「ゴミの分別方法について教えてください」「防災情報はどこで確認できますか」

## 技術的な詳細

このサンプルでは、以下のOpenAI Responses API機能を活用しています：

1. **Function Calling**: AIが適切なタイミングで外部関数を呼び出して行政情報を取得
2. **前回のレスポンスID**: 会話の継続性を維持するために前回のレスポンスIDを活用
3. **インストラクション設定**: ボットの役割と応答スタイルを定義するシステムプロンプト

## カスタマイズと行政応用

このサンプルは以下のようにカスタマイズして実際の行政サービスに応用できます：

- **データソースの変更**: 模擬データの代わりに実際の行政システムやデータベースに接続
- **追加機能の実装**: オンライン申請、予約システム、多言語対応などの機能を追加
- **UI改善**: モバイル対応や高齢者向けのアクセシビリティ強化
- **特定サービス連携**: 特定の行政サービス（子育て支援、高齢者福祉など）に特化した案内機能の実装
- **分析機能**: 市民の問い合わせ傾向を分析し行政サービス改善に活用する機能を追加

## 制限事項と考慮点

- **API使用量**: 頻繁な利用や長いチャットセッションはAPIコストが増加する可能性があります
- **APIキーのセキュリティ**: 実運用では適切なAPIキー管理が必要です
- **個人情報の取り扱い**: 市民の個人情報を扱う場合は、適切なプライバシー保護対策と法的対応が必要です
- **情報の正確性**: 行政情報は頻繁に更新されるため、定期的なデータ更新の仕組みが必要です

## 追加リソース

- [OpenAI Function Calling Documentation](https://platform.openai.com/docs/guides/function-calling)
- [Responses API Reference](https://platform.openai.com/docs/api-reference/responses)
- [Flask Documentation](https://flask.palletsprojects.com/)
- [Pydantic Documentation](https://docs.pydantic.dev/)