# ユースケース 041: 医療情報の理解支援と説明

このユースケースでは、OpenAI Responses APIを活用して、一般の方向けに医療情報の理解を支援し、わかりやすく説明するアプリケーションを実装します。

## 概要

医療情報の理解支援アプリケーションは、専門的な医療用語や情報を一般の方にもわかりやすく説明し、健康リテラシーの向上をサポートします。このサンプルでは、Responses APIとツール機能を使用して、ユーザーからの医療関連の質問に応じて適切な情報を提供し、理解を促進します。

このサンプルでは、以下の機能を紹介しています：

- 医療情報支援のためのAIアシスタントの構築方法
- 関数呼び出しを使った各種医療情報（症状、治療法、医療制度など）の取得と活用
- 医療情報の説明における倫理的配慮と正確性の確保
- コンソールベースとWebベースの両方のインターフェース実装

## 実装されている機能

1. **医療用語説明**: 専門的な医療用語をわかりやすく説明
2. **症状情報検索**: 一般的な症状に関する基本情報の提供
3. **治療法情報**: 一般的な治療法や医療処置の基本説明
4. **医療制度案内**: 健康保険、医療費助成などの制度説明
5. **健康相談支援**: 一般的な健康上の悩みに関する基本的なアドバイス提供
6. **テキスト/Webの両インターフェース**: コマンドラインとブラウザの両方で利用可能
7. **ダミー医療データ**: `medical_data.py`には、開発・テスト用のダミー医療データを収録

## 実行方法

1. プロジェクトのルートディレクトリにある`.env`ファイルにOpenAI APIキーを設定します：

```
OPENAI_API_KEY=your_api_key_here
```

2. 必要なパッケージをインストールします：

```bash
pip install -r requirements.txt
```

3. スクリプトを実行します：

```bash
python main.py
```

4. インターフェースを選択します：
   - コンソールインターフェース（テキストベース）
   - Webインターフェース（ブラウザベース - http://localhost:5004 にアクセス）

## 活用例

以下のような質問で機能をテストできます：

- **医療用語の説明**: 「血糖値とは何ですか？」「MRIとCTスキャンの違いは？」
- **症状の説明**: 「頭痛にはどんな種類がありますか？」「発熱の対処法を教えてください」
- **治療法の説明**: 「抗生物質はどのように機能しますか？」「リハビリテーションの目的は？」
- **医療制度**: 「特定疾患医療費助成制度について教えてください」「健康保険の高額療養費とは？」
- **予防医学**: 「生活習慣病の予防法について知りたいです」「適切な運動量の目安は？」

## 技術的な詳細

このサンプルでは、以下のOpenAI Responses API機能を活用しています：

1. **Function Calling**: AIが適切なタイミングで外部関数を呼び出して医療情報を取得
2. **前回のレスポンスID**: 会話の継続性を維持するために前回のレスポンスIDを活用
3. **インストラクション設定**: ボットの役割と応答スタイルを定義するシステムプロンプト

## カスタマイズと応用

このサンプルは以下のようにカスタマイズして実際のサービスに応用できます：

- **データソース拡張**: 信頼性の高い医療情報源と連携してより詳細な情報を提供
- **多言語対応**: 複数言語での医療情報提供に対応
- **パーソナライズ機能**: ユーザーの年齢や性別、健康状態に応じた情報提供
- **視覚的補助**: 医療情報の理解を助ける図表やイラストの提供
- **音声インターフェース**: 高齢者や視覚障害者向けの音声ベースのインターフェース

## 制限事項と考慮点

- **医療アドバイスの限界**: このアプリケーションは医療専門家への相談に代わるものではありません
- **情報の正確性**: 提供される情報は一般的な説明であり、個別の医療アドバイスではありません
- **プライバシー配慮**: 医療に関する会話は特に慎重なプライバシー保護が必要です
- **責任の所在**: 医療情報提供における責任の所在と免責事項の明確化が必要です
- **倫理的配慮**: 不安を煽らない、誤解を生まない説明の工夫が重要です

## 追加リソース

- [OpenAI Function Calling Documentation](https://platform.openai.com/docs/guides/function-calling)
- [Responses API Reference](https://platform.openai.com/docs/api-reference/responses)
- [Flask Documentation](https://flask.palletsprojects.com/)
- [Pydantic Documentation](https://docs.pydantic.dev/)